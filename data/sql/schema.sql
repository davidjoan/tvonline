CREATE TABLE t_category_translation (id BIGINT, name VARCHAR(100) NOT NULL, description TEXT NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ENGINE = INNODB;
CREATE TABLE t_category (id BIGINT AUTO_INCREMENT, rank BIGINT, image VARCHAR(200), active CHAR(1) DEFAULT '0' NOT NULL, root_id BIGINT, lft INT, rgt INT, level SMALLINT, created_by BIGINT DEFAULT 1 NOT NULL, updated_by TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX i_active_idx (active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ENGINE = INNODB;
CREATE TABLE t_user (id BIGINT AUTO_INCREMENT, realname VARCHAR(200) NOT NULL, username VARCHAR(50) NOT NULL, password VARCHAR(255) NOT NULL, email VARCHAR(100) NOT NULL, url VARCHAR(255), twitter_username VARCHAR(100), phone VARCHAR(100), active CHAR(1) DEFAULT '0' NOT NULL, last_access_at DATETIME, slug VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX i_username_idx (username), UNIQUE INDEX u_email_idx (email), INDEX i_url_idx (url), INDEX i_twitter_username_idx (twitter_username), INDEX i_active_idx (active), UNIQUE INDEX t_user_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ENGINE = INNODB;
CREATE TABLE t_video_translation (id BIGINT, title VARCHAR(100) NOT NULL, description TEXT NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ENGINE = INNODB;
CREATE TABLE t_video (id BIGINT AUTO_INCREMENT, category_id BIGINT, code VARCHAR(20) NOT NULL, image VARCHAR(200), video TEXT, time VARCHAR(10), live CHAR(1) DEFAULT '0' NOT NULL, new CHAR(1) DEFAULT '1' NOT NULL, active CHAR(1) DEFAULT '1' NOT NULL, type CHAR(1) DEFAULT 'F' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), created_by BIGINT DEFAULT 1 NOT NULL, updated_by TEXT, INDEX i_active_idx (active), INDEX i_code_idx (code), INDEX i_video_idx (code), INDEX i_time_idx (code), UNIQUE INDEX t_video_sluggable_idx (slug), INDEX category_id_idx (category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ENGINE = INNODB;
CREATE TABLE t_visit (id BIGINT AUTO_INCREMENT, remote_address VARCHAR(50) NOT NULL, remote_port VARCHAR(50) NOT NULL, http_user_agent VARCHAR(255) NOT NULL, datetime datetime NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX i_remote_address_idx (remote_address), INDEX i_datetime_idx (datetime), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ENGINE = INNODB;
ALTER TABLE t_category_translation ADD CONSTRAINT t_category_translation_id_t_category_id FOREIGN KEY (id) REFERENCES t_category(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE t_video_translation ADD CONSTRAINT t_video_translation_id_t_video_id FOREIGN KEY (id) REFERENCES t_video(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE t_video ADD CONSTRAINT t_video_category_id_t_category_id FOREIGN KEY (category_id) REFERENCES t_category(id) ON UPDATE CASCADE ON DELETE CASCADE;
